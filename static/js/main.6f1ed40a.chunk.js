(this["webpackJsonpreact-reward-store"]=this["webpackJsonpreact-reward-store"]||[]).push([[0],{98:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),l=a(18),i=a(5),u=a(16),s=a(23),m=a(58),d=a.n(m).a.create({baseURL:"https://coding-challenge-api.aerolab.co",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk"}}),p="SET_USER",E="ADD_USER_POINTS",f="SUBTRACT_USER_POINTS",v="SET_USER_ERROR",g="SET_ERROR_FROM_SERVICE",h="SET_DATA_FROM_SERVICE",_="ORDER_DATA_BY_DATE",b="ORDER_DATA_BY_LOW_PRICE",y="ORDER_DATA_BY_HIGH_PRICE",N="LOADING",C="CLEANUP",O=function(e){return{type:p,user:e}},w=function(e){return{type:v,user:e}},j=function(e){return{type:h,data:e}},D=function(e){return{type:g,data:e}},R=function(e){return{type:N,data:e}},S=Object(s.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"John Kite",points:0},t=arguments.length>1?arguments[1]:void 0;return t.type===p?{name:t.user.data.name,points:t.user.data.points}:t.type===E?{name:e.name,points:Number(e.points)+Number(t.user)}:t.type===f?{name:e.name,points:Number(e.points)-Number(t.user)}:(t.type,e)},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],loading:!1,page:"products"},t=arguments.length>1?arguments[1]:void 0;return t.type===h?{data:t.data.data,page:t.data.config.url,prevState:e}:t.type===_?{data:t.data.data.sort((function(e,t){return new Date(t.createDate)-new Date(e.createDate)})),recentFilter:!0,page:t.data.page}:t.type===y?{data:t.data.data.sort((function(e,t){return t.cost-e.cost})),highFilter:!0,page:t.data.page}:t.type===b?{data:t.data.data.sort((function(e,t){return e.cost-t.cost})),lowFilter:!0,page:t.data.page}:t.type===g?{data:[],error:"Can't get the data from the server"}:t.type===N?{data:[],loading:!0,page:e.page}:t.type===C?{data:[]}:e}}),k=a(59),I=Object(s.d)(S,Object(s.a)(k.a));var A=function(e){var t=e.text,a=e.bgImage;return r.a.createElement("div",{className:"banner ".concat(a)},r.a.createElement("h1",null,t))},F=a(11),P=a(115);var B=function(e,t){var a=Object(n.useState)(1),r=Object(F.a)(a,2),c=r[0],o=r[1],l=Math.ceil(e.length/t);return{next:function(){o((function(e){return Math.min(e+1,l)}))},prev:function(){o((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);o((function(e){return Math.min(t,l)}))},currentData:function(){var a=(c-1)*t,n=a+t;return e.slice(a,n)},currentPage:c,maxPage:l}},T=a(37),x=a.n(T),U=a(113),L=a(35),M=a.n(L);var J=function(e){var t=e.open,a=e.children,n=e.onClose,c=e.title,l=e.onLoad,i=e.approvalBtnTxt,u=e.submit;return t?o.a.createPortal(r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"overlay",onClick:n}),r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal__header"},c,r.a.createElement(x.a,{onClick:n})),r.a.createElement("div",{className:"modal__content"},a),r.a.createElement("div",{className:"modal__btns"},l?r.a.createElement(M.a,{type:"cubes",color:"#232f3e",height:80,width:80}):r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{onClick:u},i||"Approve"),r.a.createElement(U.a,{onClick:n},"Cancel"))))),document.getElementById("portal")):null},H=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};var G=function(e){var t=e.product;return r.a.createElement("div",{className:"redeem"},r.a.createElement("p",null,"Are you sure that you want to redeem this product ?"),r.a.createElement("div",{className:"redeem__product"},r.a.createElement("img",{src:t.img.url,alt:t.name}),r.a.createElement("div",{className:"redeem__product__info"},r.a.createElement("p",null,"Product: ".concat(t.name)),r.a.createElement("p",null,"Price: $".concat(H(t.cost))))))},Y=a(22);a(56);Y.a.configure();var Q=function(e){var t=e.CardComponent,a=e.endpoint,c=e.fetchData,o=e.products,l=e.loading,i=e.recentFilter,u=e.lowFilter,s=e.highFilter,m=e.subtractUserPoints,p=e.orderDataByDate,E=e.orderDataByLowPrice,f=e.orderDataByHighPrice,v=Object(n.useState)({}),g=Object(F.a)(v,2),h=g[0],_=g[1],b=Object(n.useState)(1),y=Object(F.a)(b,2),N=y[0],C=y[1],O=Object(n.useState)(!1),w=Object(F.a)(O,2),j=w[0],D=w[1],R=Object(n.useState)(!1),S=Object(F.a)(R,2),k=S[0],I=S[1],A=Math.ceil(o.length/12),T=B(o,12);return Object(n.useEffect)((function(){c(a)}),[c,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"productListHeader"},r.a.createElement("div",{className:"productListHeader__filter"},r.a.createElement("p",null,"".concat(0===o.length?0:T.maxPage===N?o.length:12*N," of ").concat(o.length," products | Sort by : ")),"user/history"===a&&r.a.createElement(U.a,{className:i?"active":"",onClick:function(){return p({data:o,page:a})}},"Most recent"),r.a.createElement(U.a,{className:u?"active":"",onClick:function(){return E({data:o,page:a})}},"Lowest price"),r.a.createElement(U.a,{className:s?"active":"",onClick:function(){return f({data:o,page:a})}},"Highest price")),r.a.createElement("hr",null)),r.a.createElement("div",{className:"productListContainer"},l?r.a.createElement(M.a,{type:"spin",color:"#232f3e",height:100,width:100,className:"custom_spinner"}):T.currentData().map((function(e,a){return r.a.createElement(t,{key:a,product:e,setRedeemProduct:_,redeemModal:function(){return D(!0)}})}))),r.a.createElement("div",{className:"productPagination"},r.a.createElement(P.a,{count:A,size:"large",page:N,shape:"rounded",onChange:function(e,t){C(t),T.jump(t)}})),r.a.createElement(J,{open:j,onClose:function(){return D(!1)},submit:function(){I(!0),d.post("redeem",{productId:h._id}).then((function(e){I(!1),D(!1),Y.a.success(e.data.message),m(h.cost)})).catch((function(e){I(!1),Y.a.error("A problem occur, please contact the administrator")}))},title:"Redeem product",onLoad:k,approvalBtnTxt:"Redeem"},r.a.createElement(G,{product:h})))},W=Object(u.b)((function(e,t){var a=e.data,n=a.prevState?a.prevState.data:[];return{products:a.page===t.endpoint||a.loading?a.data:n,loading:a.loading,error:a.error,recentFilter:a.recentFilter,lowFilter:a.lowFilter,highFilter:a.highFilter}}),(function(e){return{fetchData:function(t){return e(function(e){return function(t){t(R(e)),d.get(e).then((function(e){return t(j(e))})).catch((function(e){return t(D(e))}))}}(t))},orderDataByDate:function(t){return e(function(e){return{type:_,data:e}}(t))},orderDataByLowPrice:function(t){return e(function(e){return{type:b,data:e}}(t))},orderDataByHighPrice:function(t){return e(function(e){return{type:y,data:e}}(t))},subtractUserPoints:function(t){return e({type:f,user:t})}}}))(Q);var $=function(e){var t=e.text,a=e.bgImage,n=e.CardComponent,c=e.endpoint;return r.a.createElement("main",null,r.a.createElement(A,{text:t,bgImage:a}),r.a.createElement(W,{CardComponent:n,endpoint:c}))};var z=function(){var e=Object(i.g)();return r.a.createElement("main",null,r.a.createElement("div",{className:"storeContainer"},r.a.createElement("div",{className:"fourOhFour"},r.a.createElement("h1",null,"404"),r.a.createElement("p",null,"Page Not Found"),r.a.createElement(U.a,{onClick:function(){return e.push("/react-reward-store")}},"Go to Electronics"))))};var V=function(e){var t=e.text,a=e.value,n=e.group;return r.a.createElement("div",{className:"radioBtn"},r.a.createElement("label",null,t,r.a.createElement("input",{type:"radio",value:a,name:n}),r.a.createElement("span",{className:"checkmark"})))};Y.a.configure();var K=function(e){var t=e.addUserPoints,a=Object(n.useState)(!1),c=Object(F.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(0),u=Object(F.a)(i,2),s=u[0],m=u[1],p=Object(n.useState)(!1),E=Object(F.a)(p,2),f=E[0],v=E[1];return r.a.createElement("main",null,r.a.createElement("div",{className:"storeContainer"},r.a.createElement("div",{className:"addCoinsContainer__Card"},r.a.createElement("h1",null,"You want to add more coins to your account ?"),r.a.createElement("p",null,"Choose the amount you want to add : "),r.a.createElement("form",null,r.a.createElement("fieldset",{id:"addCoin",onChange:function(e){return m(e.target.value)}},r.a.createElement(V,{text:"$ 1,000 ",value:1e3,group:"addCoin"}),r.a.createElement(V,{text:"$ 5,000 ",value:5e3,group:"addCoin"}),r.a.createElement(V,{text:"$ 7,500 ",value:7500,group:"addCoin"})),r.a.createElement(U.a,{onClick:function(){return l(!0)},style:{visibility:0===s?"hidden":"visible"}},"Add coins")))),r.a.createElement(J,{open:o,onClose:function(){return l(!1)},submit:function(){v(!0),d.post("user/points",{amount:Number(s)}).then((function(e){v(!1),l(!1),Y.a.success("The amount of coins where successfully added to your account"),t(s)})).catch((function(e){v(!1),Y.a.error("A problem occur, please contact the administrator")}))},title:"Add coins",onLoad:f,approvalBtnTxt:"Add Coins"},r.a.createElement("p",null,"Want to add ",r.a.createElement("strong",null,"$",H(s))," coins to your account?")))},X=Object(u.b)(null,(function(e){return{addUserPoints:function(t){return e({type:E,user:t})}}}))(K),Z=a(31),q=a.n(Z),ee=a(63),te=a.n(ee);var ae=function(e){var t=e.cleanup,a=e.fetchUser,c=e.name,o=e.points,i=Object(n.useState)(!1),u=Object(F.a)(i,2),s=u[0],m=u[1],d=function(){return m(!s)},p=function(){t(),d()};return Object(n.useEffect)((function(){a()}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},r.a.createElement(l.b,{to:"#"},r.a.createElement(te.a,{className:"navbar__menu-bars",onClick:d}))),r.a.createElement("nav",{className:s?"navbar-menu active":"navbar-menu"},r.a.createElement("ul",{className:"navbar-menu__items"},r.a.createElement("li",{className:"navbar-menu__items__toggle"},r.a.createElement(l.b,{to:"#"},r.a.createElement(x.a,{className:"navbar-menu__menu-bars",onClick:d}))),r.a.createElement("li",{className:"navbar-menu__user"},r.a.createElement("label",null,c),r.a.createElement("div",{className:"navbar-menu__user__widget"},r.a.createElement("label",null,H(o)),r.a.createElement(q.a,null))),r.a.createElement("li",{key:"electronics",className:"navbar-text",onClick:p},r.a.createElement(l.b,{to:"/react-reward-store"},"Electronics")),r.a.createElement("li",{key:"history",className:"navbar-text",onClick:p},r.a.createElement(l.b,{to:"/react-reward-store/history"},"History")),r.a.createElement("li",{key:"addCoins",className:"navbar-text",onClick:d},r.a.createElement(l.b,{to:"/react-reward-store/addCoins"},r.a.createElement(U.a,null,"Add Coins"))))))},ne=Object(u.b)((function(e){var t=e.user;return{name:t.name,points:t.points}}),(function(e){return{cleanup:function(){return e({type:C})},fetchUser:function(){return e((function(e){d.get("user/me").then((function(t){return e(O(t))})).catch((function(t){return e(w(t))}))}))}}}))(ae);var re=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("p",null,"Created by Jorge Elias | 2020"))},ce=a(64),oe=a.n(ce);var le=function(e){var t=e.product,a=e.redeemModal,n=e.setRedeemProduct,c=e.total;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card__inner"},r.a.createElement("div",{className:"card__inner_normal"},c<t.cost?r.a.createElement("div",{className:"card__inner_normal__missing"},r.a.createElement("label",null,"You need ".concat(H(t.cost-c))),r.a.createElement(q.a,null)):r.a.createElement("div",{className:"card__inner_normal__shop"},r.a.createElement(oe.a,null)),r.a.createElement("img",{src:t.img.url,alt:t.name}),r.a.createElement("hr",null),r.a.createElement("p",{className:"card__category"},t.category),r.a.createElement("p",{className:"card__name"},t.name)),r.a.createElement("div",{className:"card__inner_hover"},r.a.createElement("div",{className:"card__inner_hover__price"},r.a.createElement("p",null,H(t.cost)),r.a.createElement(q.a,null)),c>=t.cost&&r.a.createElement(U.a,{onClick:function(){return a(),void n(t)}},"Redeem now"))))},ie=Object(u.b)((function(e){return{total:e.user.points}}))(le);var ue=function(e){var t=e.product,a=t.img.url.replace("aerolab-challenge.now.sh","coding-challenge-api.aerolab.co");return r.a.createElement("div",{className:"historyCard"},r.a.createElement("img",{src:a,alt:t.name}),r.a.createElement("div",{className:"historyCard__info"},r.a.createElement("p",{className:"historyCard__info__name"},t.name),r.a.createElement("p",{className:"historyCard__info__category"},t.category),r.a.createElement("p",{className:"historyCard__info__date"},"Buyed on : ".concat(function(e){var t,a=new Date(e);return"".concat((t=a.getMonth(),["January","February","March","April","May","June","July","August","September","October","November","December"][t])," ").concat(e.substring(8,10),", ").concat(a.getFullYear())}(t.createDate)))))};a(98);o.a.render(r.a.createElement(u.a,{store:I},r.a.createElement(l.a,null,r.a.createElement(ne,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/react-reward-store"},r.a.createElement($,{text:"Electronics",bgImage:"electronic",CardComponent:ie,endpoint:"products"})),r.a.createElement(i.b,{path:"/react-reward-store/history"},r.a.createElement($,{text:"History",bgImage:"shop",CardComponent:ue,endpoint:"user/history"})),r.a.createElement(i.b,{path:"/react-reward-store/addCoins"},r.a.createElement(X,null)),r.a.createElement(i.b,{path:"/react-reward-store/404",key:"fourOhFour"},r.a.createElement(z,null)),r.a.createElement(i.a,{to:"/react-reward-store/404"})),r.a.createElement(re,null))),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.6f1ed40a.chunk.js.map